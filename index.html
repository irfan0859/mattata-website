<!DOCTYPE html>
<html>
	<head>
		<title>mattata</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, height=device-height, user-scalable=no, initial-scale=1.0"/>
		<meta name="description" content="A plugin-based bot for Telegram; written in Lua, with ❤️"/>
		<link href="http://mattata.pw" rel="canonical"/>
		<link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
		<style>
			@font-face {
				font-family: BelloPro;
				src: url(../fonts/BelloPro.ttf) format("truetype"), url(../fonts/BelloPro.woff) format("woff");
			}
			body {
				background-color: #6389a8;
				color: #fff;
				line-height: 1.6;
				text-shadow: 0 1px 0 #000;
			}
			a {
				font-family: "Roboto Slab", serif;
				font-size: 1em;
				border-bottom: 1px solid #fff;
				color: #fff;
				text-decoration: none;
			}
			a:hover {
				border-bottom: 0
			}
			#heading {
				font-family: BelloPro;
				font-size: 4em;
				line-height: 1.3;
			}
			#body p {
				font-family: "Roboto Slab", serif;
				font-size: 1em;
			}
		</style>
	</head>
	<body onload="init()">
		<script type="text/javascript" src="js/ThreeCanvas.js"></script>
		<script type="text/javascript" src="js/Snow.js"></script>
		<script>
			var SCREEN_WIDTH = window.innerWidth;
			var SCREEN_HEIGHT = window.innerHeight;
			
			var container;

			var particle;

			var camera;
			var scene;
			var renderer;

			var mouseX = 0;
			var mouseY = 0;

			var windowHalfX = window.innerWidth / 2;
			var windowHalfY = window.innerHeight / 2;
			
			var particles = []; 
			var particleImage = new Image();
			particleImage.src = 'img/ParticleSmoke.png'; 

		
		
			function init() {

				container = document.createElement('div');
				document.body.appendChild(container);

				camera = new THREE.PerspectiveCamera( 75, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 10000 );
				camera.position.z = 1000;

				scene = new THREE.Scene();
				scene.add(camera);
					
				renderer = new THREE.CanvasRenderer();
				renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);
				var material = new THREE.ParticleBasicMaterial( { map: new THREE.Texture(particleImage) } );
					
				for (var i = 0; i < 500; i++) {

					particle = new Particle3D( material);
					particle.position.x = Math.random() * 2000 - 1000;
					particle.position.y = Math.random() * 2000 - 1000;
					particle.position.z = Math.random() * 2000 - 1000;
					particle.scale.x = particle.scale.y =  1;
					scene.add( particle );
					
					particles.push(particle); 
				}

				container.appendChild( renderer.domElement );

	
				document.addEventListener( 'mousemove', onDocumentMouseMove, false );
				document.addEventListener( 'touchstart', onDocumentTouchStart, false );
				document.addEventListener( 'touchmove', onDocumentTouchMove, false );
				
				setInterval( loop, 1000 / 60 );
				
			}
			
			function onDocumentMouseMove( event ) {

				mouseX = event.clientX - windowHalfX;
				mouseY = event.clientY - windowHalfY;
			}

			function onDocumentTouchStart( event ) {

				if ( event.touches.length == 1 ) {

					event.preventDefault();

					mouseX = event.touches[ 0 ].pageX - windowHalfX;
					mouseY = event.touches[ 0 ].pageY - windowHalfY;
				}
			}

			function onDocumentTouchMove( event ) {

				if ( event.touches.length == 1 ) {

					event.preventDefault();

					mouseX = event.touches[ 0 ].pageX - windowHalfX;
					mouseY = event.touches[ 0 ].pageY - windowHalfY;
				}
			}

			function loop() {

			for(var i = 0; i<particles.length; i++)
				{

					var particle = particles[i]; 
					particle.updatePhysics(); 
	
					with(particle.position)
					{
						if(y<-1000) y+=2000; 
						if(x>1000) x-=2000; 
						else if(x<-1000) x+=2000; 
						if(z>1000) z-=2000; 
						else if(z<-1000) z+=2000; 
					}				
				}
			
				camera.position.x += ( mouseX - camera.position.x ) * 0.05;
				camera.position.y += ( - mouseY - camera.position.y ) * 0.05;
				camera.lookAt(scene.position); 

				renderer.render( scene, camera );

				
			}
		</script>
		<div id="heading">mattata</div>
		<div id="body"><p><br>A plugin-based bot for Telegram; written in Lua, made with ❤.️<br>Created and maintained by <a href="https://telegram.me/wrxck">@wrxck</a>.<br>This project is open source and can be found <a href="https://github.com/matthewhesketh/mattata">on GitHub</a>!<br><br><br>&copy; Matthew Hesketh, 2016<br></p></div>
	</body>
</html>
